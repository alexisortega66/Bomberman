<!DOCTYPE html>
<html>
<head>
    <title>Bomberman</title>
</head>
<body>
    <canvas id="miCanvas" width="400" height="400"></canvas>

    <script>
       var canvas = document.getElementById("miCanvas");
var ctx = canvas.getContext("2d");
let dir=0;
let pause=false;
let bomba = new Image();
bomba.src="medusa.png";
let jugador = new Image();
jugador.src="bobEsponja.png";

var blockSize = 50; // Tamaño de los bloques
var numRows = canvas.height / blockSize;
var numCols = canvas.width / blockSize;

var playerSize = 40; // Tamaño del jugador
var player = {
    x: canvas.width / 2 - playerSize / 2,
    y: canvas.height / 2 - playerSize / 2,
    width: playerSize,
    height: playerSize
};

var bombs = []; // Arreglo para almacenar las bombas

function drawPlayer() {
    ctx.drawImage(jugador, player.x, player.y, player.width, player.height);

}

function drawBomb(bomb) {
    //ctx.fillStyle = "black";
    ctx.drawImage(bomba, bomb.x, bomb.y, player.width, player.height);

}

function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPlayer();

    // Dibujar y actualizar el estado de las bombas
    for (var i = 0; i < bombs.length; i++) {
        drawBomb(bombs[i]);
        bombs[i].timer--;
        if (bombs[i].timer <= 0) {
            // Explotar la bomba
            bombs.splice(i, 1);
        }
    }
}

document.addEventListener("keydown", function(e) {
    switch (e.keyCode) {
        case 87:
                    if (!pause) dir = e.keyCode;
                    player.y -= 10
                    break;
                case 83:
                    if (!pause) dir = e.keyCode;
                    player.y += 10
                    break;
                case 65:
                    if (!pause) dir = e.keyCode;
                    player.x -= 10
                    break;
                case 68:
                    if (!pause) dir = e.keyCode;
                    player.x += 10
                    break;
        case 32: // Tecla Espacio (colocar bomba)
            var bomb = {
                x: Math.floor(player.x / blockSize) * blockSize,
                y: Math.floor(player.y / blockSize) * blockSize,
                timer: 60 // Duración de la bomba en fotogramas
            };
            bombs.push(bomb);
            break;
    }
});

setInterval(update, 1000 / 60); // Actualizar el juego a 60 FPS


    </script>
</body>
</html>
